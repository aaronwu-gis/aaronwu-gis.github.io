<!DOCTYPE html>
                <html>
                  <head>
                    <meta name="viewport" content="initial-scale=1.0, user-scalable=no">
                    <meta charset="utf-8">
                    <title>Boundary</title>
                    <script src="https://cdn.babylonjs.com/babylon.js"></script>
                    <script src="https://cdn.babylonjs.com/loaders/babylonjs.loaders.min.js"></script>
                    <script src="https://cdn.babylonjs.com/materialsLibrary/babylonjs.materials.min.js"></script>
                    <script src="https://cdn.babylonjs.com/earcut.min.js"></script>
                    <link rel="stylesheet" href="3d-map-popup.css" type="text/css">
                    <style>
                      html { height: 100%; }
                      body {height:100%;min-height: 100%; background-color: #75a3c9; padding: 0;margin: 0;font-family: Arial, Helvetica, Geneva, sans-serif;}
                      #canvas-wrapper { width:100%; height: 100%; position: relative; }
                      canvas {width:100%;height: 100%; background-color: #75a3c9;}
                      canvas:focus{outline:none;}
                      #atributation {position: absolute; right: 3px; bottom: 3px; background-color: white; color: gray; padding: 3px 6px; font-size: 10px; opacity: 0.8;}
                      #atributation a {color: gray;}
                    </style><script>function pinPopupCloseAll(){document.getElementById('1755837272065').style.display = "none";document.getElementById('1755836986978').style.display = "none";document.getElementById('1755837197958').style.display = "none";}function pinPopupClose(pin_id){ console.log(pin_id);document.getElementById(pin_id).style.display = "none"; }function pinPopupOpen(pin_id){ document.getElementById(pin_id).style.display = "block"; }</script></head>
                  <body style="overflow: hidden;">
                  <div id="canvas-wrapper"><div class="pinPopupPreview" id="1755837272065"><a class="pinPopupPreviewClose" onclick="pinPopupClose('1755837272065')"><svg fill="#dadada" height="24px" width="24px" version="1.1" xmlns="http://www.w3.org/2000/svg" viewBox="-51.2 -51.2 614.40 614.40" xmlns:xlink="http://www.w3.org/1999/xlink" enable-background="new 0 0 512 512" stroke="#dadada" stroke-width="0.00512"><g id="SVGRepo_bgCarrier" stroke-width="0" transform="translate(64,64), scale(0.75)"><rect x="-51.2" y="-51.2" width="614.40" height="614.40" rx="307.2" fill="#666666" strokewidth="0"></rect></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"> <path d="M256,0C114.844,0,0,114.844,0,256s114.844,256,256,256s256-114.844,256-256S397.156,0,256,0z M358.625,313.375 c12.5,12.492,12.5,32.758,0,45.25C352.383,364.875,344.188,368,336,368s-16.383-3.125-22.625-9.375L256,301.25l-57.375,57.375 C192.383,364.875,184.188,368,176,368s-16.383-3.125-22.625-9.375c-12.5-12.492-12.5-32.758,0-45.25L210.75,256l-57.375-57.375 c-12.5-12.492-12.5-32.758,0-45.25c12.484-12.5,32.766-12.5,45.25,0L256,210.75l57.375-57.375c12.484-12.5,32.766-12.5,45.25,0 c12.5,12.492,12.5,32.758,0,45.25L301.25,256L358.625,313.375z"></path> </g></svg></a><div class="pinPopupPreviewImg"><img class="pinPopupPreviewImgRadiusTop" src="https://upload.wikimedia.org/wikipedia/commons/thumb/8/8f/Lake_Hawea_06.jpg/330px-Lake_Hawea_06.jpg"></div><div class="pinPopupPreviewContent"><div class="pinPopupPreviewBtn"><a class="pinPopupPreviewLink" href="https://en.wikipedia.org/wiki/Lake_H%C4%81wea" target="_blank">Lake Hāwea</a></div><div class="pinPopupPreviewText">Lake Hāwea is New Zealand's ninth largest lake located on the South Island in the Otago Region at an altitude of 348 m. It covers 141 km2 and is 392 m deep.</div></div></div><div class="pinPopupPreview" id="1755836986978"><a class="pinPopupPreviewClose" onclick="pinPopupClose('1755836986978')"><svg fill="#dadada" height="24px" width="24px" version="1.1" xmlns="http://www.w3.org/2000/svg" viewBox="-51.2 -51.2 614.40 614.40" xmlns:xlink="http://www.w3.org/1999/xlink" enable-background="new 0 0 512 512" stroke="#dadada" stroke-width="0.00512"><g id="SVGRepo_bgCarrier" stroke-width="0" transform="translate(64,64), scale(0.75)"><rect x="-51.2" y="-51.2" width="614.40" height="614.40" rx="307.2" fill="#666666" strokewidth="0"></rect></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"> <path d="M256,0C114.844,0,0,114.844,0,256s114.844,256,256,256s256-114.844,256-256S397.156,0,256,0z M358.625,313.375 c12.5,12.492,12.5,32.758,0,45.25C352.383,364.875,344.188,368,336,368s-16.383-3.125-22.625-9.375L256,301.25l-57.375,57.375 C192.383,364.875,184.188,368,176,368s-16.383-3.125-22.625-9.375c-12.5-12.492-12.5-32.758,0-45.25L210.75,256l-57.375-57.375 c-12.5-12.492-12.5-32.758,0-45.25c12.484-12.5,32.766-12.5,45.25,0L256,210.75l57.375-57.375c12.484-12.5,32.766-12.5,45.25,0 c12.5,12.492,12.5,32.758,0,45.25L301.25,256L358.625,313.375z"></path> </g></svg></a><div class="pinPopupPreviewImg"><img class="pinPopupPreviewImgRadiusTop" src="https://plus.unsplash.com/premium_photo-1661964091508-b77d484a3003?q=80&w=1632&auto=format&fit=crop&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D"></div><div class="pinPopupPreviewContent"><div class="pinPopupPreviewBtn"><a class="pinPopupPreviewLink" href="https://en.wikipedia.org/wiki/Lake_Wakatipu" target="_blank">Whakatipu Waimāori / Lake Wakatipu</a></div><div class="pinPopupPreviewText">Lake Wakatipu (Māori: Whakatipu Waimāori) is an inland lake (finger lake) in the South Island of New Zealand. It is in the southwest corner of the Otago region, near its boundary with Southland.</div></div></div><div class="pinPopupPreview" id="1755837197958"><a class="pinPopupPreviewClose" onclick="pinPopupClose('1755837197958')"><svg fill="#dadada" height="24px" width="24px" version="1.1" xmlns="http://www.w3.org/2000/svg" viewBox="-51.2 -51.2 614.40 614.40" xmlns:xlink="http://www.w3.org/1999/xlink" enable-background="new 0 0 512 512" stroke="#dadada" stroke-width="0.00512"><g id="SVGRepo_bgCarrier" stroke-width="0" transform="translate(64,64), scale(0.75)"><rect x="-51.2" y="-51.2" width="614.40" height="614.40" rx="307.2" fill="#666666" strokewidth="0"></rect></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"> <path d="M256,0C114.844,0,0,114.844,0,256s114.844,256,256,256s256-114.844,256-256S397.156,0,256,0z M358.625,313.375 c12.5,12.492,12.5,32.758,0,45.25C352.383,364.875,344.188,368,336,368s-16.383-3.125-22.625-9.375L256,301.25l-57.375,57.375 C192.383,364.875,184.188,368,176,368s-16.383-3.125-22.625-9.375c-12.5-12.492-12.5-32.758,0-45.25L210.75,256l-57.375-57.375 c-12.5-12.492-12.5-32.758,0-45.25c12.484-12.5,32.766-12.5,45.25,0L256,210.75l57.375-57.375c12.484-12.5,32.766-12.5,45.25,0 c12.5,12.492,12.5,32.758,0,45.25L301.25,256L358.625,313.375z"></path> </g></svg></a><div class="pinPopupPreviewImg"><img class="pinPopupPreviewImgRadiusTop" src="https://images.unsplash.com/photo-1585799845416-27985b4ea9a9?q=80&w=1473&auto=format&fit=crop&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D"></div><div class="pinPopupPreviewContent"><div class="pinPopupPreviewBtn"><a class="pinPopupPreviewLink" href="https://en.wikipedia.org/wiki/Lake_W%C4%81naka" target="_blank">Lake Wānaka</a></div><div class="pinPopupPreviewText">Lake Wānaka is New Zealand's fourth-largest lake and the seat of the town of Wānaka in the Otago region. The lake is 278 meters above sea level, covers 192 km2 (74 sq mi), and is more than 300 m (980 ft) deep.</div></div></div><div id="atributation"><a href=\"https://www.maptiler.com/copyright/\" target=\"_blank\">© MapTiler</a> <a href=\"https://www.openstreetmap.org/copyright\" target=\"_blank\">© OpenStreetMap contributors</a></div><canvas id="renderCanvas"></canvas></div><script>var canvas = document.getElementById("renderCanvas");canvas.addEventListener("pointerdown", function(){pinPopupCloseAll();}, false);var engine = new BABYLON.Engine(canvas, true);var createScene = function(){var scene = new BABYLON.Scene(engine);scene.clearColor = new BABYLON.Color3.FromHexString("#75a3c9");var camera = new BABYLON.ArcRotateCamera("Camera",-20.48845823728283,0.9943376669522808,129.92408438252357, new BABYLON.Vector3.Zero(), scene);
                  camera.lowerBetaLimit = 0.1;
                  camera.upperBetaLimit = (Math.PI / 2) * 0.9;
                  camera.lowerRadiusLimit = 30;
                  camera.upperRadiusLimit = 256;
                  scene.activeCamera = camera;
                  scene.activeCamera.attachControl(canvas);
                  camera.useAutoRotationBehavior = true;
                  camera.autoRotationBehavior.idleRotationSpeed = 0.05;var spot            = new BABYLON.DirectionalLight("spot", new BABYLON.Vector3(-8, -23, -7), scene);    spot.specular   = new BABYLON.Color3(0,0,0);    spot.intensity  = 5;scene.onBeforeRenderObservable.add(()=>{camLight.position = camera.position;camLight.setDirectionToTarget(camera.getFrontPosition(1))});var camLight        = new BABYLON.HemisphericLight("camLight", new BABYLON.Vector3(0, 50, 0), scene);    camLight.intensity  = 0.7;    camLight.diffuse    = new BABYLON.Color3(1,1,1);    camLight.specular   = new BABYLON.Color3(0,0,0);    camLight.position   = camera.position;shadowGenerator = new BABYLON.CascadedShadowGenerator(3072, spot);shadowGenerator.stabilizeCascades = true;shadowGenerator.autoCalcDepthBounds = true;shadowGenerator.usePercentageCloserFiltering = true;shadowGenerator.filteringQuality = BABYLON.ShadowGenerator.QUALITY_HIGH;function createSidesForGroundMesh(ground, bottomY) {var sub = ground.subdivisions;var scene = ground.getScene();var edgeHeights = [];var borderHeights = [];ground.updateMeshPositions(function (positions) {var last = positions.length / 3 - 1;for (var idx = 0; idx < positions.length; idx += 3) {var e = idx / 3; var y = positions[idx + 1]; positions[idx + 1] = y; var mod = e % (sub + 1);if (mod == 0 || mod == sub) { edgeHeights.push(y); } if (e <= sub || e >= last - sub) { borderHeights.push(y); }}});var groundSizeX = ground._width;var groundSizeZ = ground._height;var paths = [];var subSizeX = groundSizeX / sub;var subSizeZ = groundSizeZ / sub;var x = 0.0;var y = bottomY;var z = groundSizeZ / 2;var e = 0;var p = 0;var path = [];for (p = sub; p >= 0; p--) { x = subSizeX * p - groundSizeX / 2;  path.push(new BABYLON.Vector3(x, borderHeights[p], z));}for (e = 0; e <= sub; e++) { z = -e * subSizeZ + groundSizeZ / 2; path.push(new BABYLON.Vector3(-groundSizeX / 2, edgeHeights[e * 2], z)); }for (p = 0; p <= sub; p++) { x = subSizeX * p - groundSizeX / 2;  path.push(new BABYLON.Vector3(x, borderHeights[p + sub + 1], z)); }for (e = sub; e >= 0; e--) { z = -e * subSizeZ + groundSizeZ / 2; path.push(new BABYLON.Vector3(groundSizeX / 2, edgeHeights[e * 2 + 1], z)); }paths.push(path);path = [];for (p = sub; p >= 0; p--) { x = subSizeX * p - groundSizeX / 2;  path.push(new BABYLON.Vector3(x, y, z)); }for (e = 0; e <= sub; e++) { z = -e * subSizeZ + groundSizeZ / 2; path.push(new BABYLON.Vector3(-groundSizeX / 2, y, z)); }for (p = 0; p <= sub; p++) { x = subSizeX * p - groundSizeX / 2;  path.push(new BABYLON.Vector3(x, y, z));}for (e = sub; e >= 0; e--) { z = -e * subSizeZ + groundSizeZ / 2; path.push(new BABYLON.Vector3(groundSizeX / 2, y, z));}paths.push(path);var groundRibbon = BABYLON.MeshBuilder.CreateRibbon("gr", { pathArray: paths}, scene);groundRibbon.position.copyFrom(ground.position);return groundRibbon;}var groundMaterial = new BABYLON.PBRMetallicRoughnessMaterial("mapSurfaceMaterial", scene);groundMaterial.metallic = 0;groundMaterial.roughness = 1.0;groundMaterial.baseTexture = new BABYLON.Texture("terrainmap.png", scene,true,true);var ground = BABYLON.Mesh.CreateGroundFromHeightMap("ground", "heightmap.png",95,100,150, 0, 3, scene, true, successCallback);
                  ground.material = groundMaterial;
                  ground.position.y  = 0;
                  ground.receiveShadows = true;var groundMaterial2 = new BABYLON.StandardMaterial("mapSurfaceMaterial2", scene);groundMaterial2.diffuseTexture = new BABYLON.Texture("routemap.png", scene);groundMaterial2.diffuseTexture.hasAlpha = true;groundMaterial2.useAlphaFromDiffuseTexture = true;groundMaterial2.diffuseTexture.level = 1.0;groundMaterial2.alpha = 1.0;var ground2 = BABYLON.Mesh.CreateGroundFromHeightMap("mapSurface2", "heightmap.png",95,100,150, 0, 3, scene, true);ground2.material = groundMaterial2;ground2.position.y = 0.1;ground2.receiveShadows = true;function successCallback(){var groundRibbon = createSidesForGroundMesh(ground, -5);var groundRibbonMat = new BABYLON.StandardMaterial("grm", scene);var groundTex = new BABYLON.Texture("edges/ground_8.jpg", scene);groundTex.uScale = 16;groundTex.vScale = 1;groundRibbonMat.diffuseTexture = groundTex;groundRibbon.material = groundRibbonMat;}var skybox = BABYLON.MeshBuilder.CreateBox("skybox", {size:1000.0}, scene);var skyboxMaterial = new BABYLON.StandardMaterial("skyBox", scene);skyboxMaterial.backFaceCulling = false;skyboxMaterial.reflectionTexture = new BABYLON.CubeTexture("skybox/skybox10", scene);skyboxMaterial.reflectionTexture.coordinatesMode = BABYLON.Texture.SKYBOX_MODE;skyboxMaterial.diffuseColor = new BABYLON.Color3(0, 0, 0);skyboxMaterial.specularColor = new BABYLON.Color3(0, 0, 0);skybox.material = skyboxMaterial;var markerText                               = "Tahuna / Glenorchy";var markerName                              = "1755836794865";marker1755836794865                        = BABYLON.MeshBuilder.CreateSphere(markerName, {diameter: 0.5, segments: 64}, scene);marker1755836794865.material               = new BABYLON.StandardMaterial("mat", scene);marker1755836794865.material.diffuseColor  = BABYLON.Color3.FromHexString("#ffffff");marker1755836794865.position.y             = 0.497888;marker1755836794865.position.x             = -21.450721;marker1755836794865.position.z             = -11.206641;var path                                    = [new BABYLON.Vector3(0, 7.5, 0),new BABYLON.Vector3(0, 0, 0)];var tube1755836794865                      = BABYLON.MeshBuilder.CreateTube("tube", {path: path, radius: 0.09}, scene);tube1755836794865.material                 = new BABYLON.StandardMaterial("mat", scene);tube1755836794865.material.diffuseColor    = BABYLON.Color3.FromHexString("#ffffff");tube1755836794865.parent                   = marker1755836794865;var font_size                               = 48;var font                                    = font_size + "px Arial";var planeHeight                             = 2;var DTHeight                                = 1.4 * font_size;var ratio                                   = planeHeight/DTHeight;var temp                                    = new BABYLON.DynamicTexture("DynamicTexture", 64, scene);var tmpctx                                  = temp.getContext();tmpctx.font                                 = font;var DTWidth                                 = tmpctx.measureText(markerText).width + 40;var planeWidth                              = DTWidth * ratio;var dynamicTexture                          = new BABYLON.DynamicTexture("DynamicTexture", {width:DTWidth | 0, height:DTHeight | 0}, scene, false);var mat1755836794865                       = new BABYLON.StandardMaterial("mat", scene);mat1755836794865.diffuseTexture            = dynamicTexture;mat1755836794865.backFaceCulling           = false;dynamicTexture.drawText(markerText, null, null, font, "#142d43", "#ffffff", true);var plane1755836794865                     = BABYLON.MeshBuilder.CreatePlane("plane", {width:planeWidth, height:planeHeight}, scene, false, BABYLON.Mesh.DOUBLESIDE);plane1755836794865.position.y              = 8.5;plane1755836794865.parent                  = marker1755836794865;plane1755836794865.billboardMode           = BABYLON.Mesh.BILLBOARDMODE_ALL;plane1755836794865.material                = mat1755836794865;shadowGenerator.addShadowCaster(marker1755836794865);var markerText                               = "Makarora";var markerName                              = "1755836753530";marker1755836753530                        = BABYLON.MeshBuilder.CreateSphere(markerName, {diameter: 0.5, segments: 64}, scene);marker1755836753530.material               = new BABYLON.StandardMaterial("mat", scene);marker1755836753530.material.diffuseColor  = BABYLON.Color3.FromHexString("#ffffff");marker1755836753530.position.y             = 0.502075;marker1755836753530.position.x             = 14.650500;marker1755836753530.position.z             = 25.973403;var path                                    = [new BABYLON.Vector3(0, 7.5, 0),new BABYLON.Vector3(0, 0, 0)];var tube1755836753530                      = BABYLON.MeshBuilder.CreateTube("tube", {path: path, radius: 0.09}, scene);tube1755836753530.material                 = new BABYLON.StandardMaterial("mat", scene);tube1755836753530.material.diffuseColor    = BABYLON.Color3.FromHexString("#ffffff");tube1755836753530.parent                   = marker1755836753530;var font_size                               = 48;var font                                    = font_size + "px Arial";var planeHeight                             = 2;var DTHeight                                = 1.4 * font_size;var ratio                                   = planeHeight/DTHeight;var temp                                    = new BABYLON.DynamicTexture("DynamicTexture", 64, scene);var tmpctx                                  = temp.getContext();tmpctx.font                                 = font;var DTWidth                                 = tmpctx.measureText(markerText).width + 40;var planeWidth                              = DTWidth * ratio;var dynamicTexture                          = new BABYLON.DynamicTexture("DynamicTexture", {width:DTWidth | 0, height:DTHeight | 0}, scene, false);var mat1755836753530                       = new BABYLON.StandardMaterial("mat", scene);mat1755836753530.diffuseTexture            = dynamicTexture;mat1755836753530.backFaceCulling           = false;dynamicTexture.drawText(markerText, null, null, font, "#142d43", "#ffffff", true);var plane1755836753530                     = BABYLON.MeshBuilder.CreatePlane("plane", {width:planeWidth, height:planeHeight}, scene, false, BABYLON.Mesh.DOUBLESIDE);plane1755836753530.position.y              = 8.5;plane1755836753530.parent                  = marker1755836753530;plane1755836753530.billboardMode           = BABYLON.Mesh.BILLBOARDMODE_ALL;plane1755836753530.material                = mat1755836753530;shadowGenerator.addShadowCaster(marker1755836753530);var markerText                               = "Tāhuna / Queenstown";var markerName                              = "1755836593609";marker1755836593609                        = BABYLON.MeshBuilder.CreateSphere(markerName, {diameter: 0.5, segments: 64}, scene);marker1755836593609.material               = new BABYLON.StandardMaterial("mat", scene);marker1755836593609.material.diffuseColor  = BABYLON.Color3.FromHexString("#ffffff");marker1755836593609.position.y             = 0.526564;marker1755836593609.position.x             = -9.362907;marker1755836593609.position.z             = -22.133865;var path                                    = [new BABYLON.Vector3(0, 7.5, 0),new BABYLON.Vector3(0, 0, 0)];var tube1755836593609                      = BABYLON.MeshBuilder.CreateTube("tube", {path: path, radius: 0.09}, scene);tube1755836593609.material                 = new BABYLON.StandardMaterial("mat", scene);tube1755836593609.material.diffuseColor    = BABYLON.Color3.FromHexString("#ffffff");tube1755836593609.parent                   = marker1755836593609;var font_size                               = 48;var font                                    = font_size + "px Arial";var planeHeight                             = 2;var DTHeight                                = 1.4 * font_size;var ratio                                   = planeHeight/DTHeight;var temp                                    = new BABYLON.DynamicTexture("DynamicTexture", 64, scene);var tmpctx                                  = temp.getContext();tmpctx.font                                 = font;var DTWidth                                 = tmpctx.measureText(markerText).width + 40;var planeWidth                              = DTWidth * ratio;var dynamicTexture                          = new BABYLON.DynamicTexture("DynamicTexture", {width:DTWidth | 0, height:DTHeight | 0}, scene, false);var mat1755836593609                       = new BABYLON.StandardMaterial("mat", scene);mat1755836593609.diffuseTexture            = dynamicTexture;mat1755836593609.backFaceCulling           = false;dynamicTexture.drawText(markerText, null, null, font, "#142d43", "#ffffff", true);var plane1755836593609                     = BABYLON.MeshBuilder.CreatePlane("plane", {width:planeWidth, height:planeHeight}, scene, false, BABYLON.Mesh.DOUBLESIDE);plane1755836593609.position.y              = 8.5;plane1755836593609.parent                  = marker1755836593609;plane1755836593609.billboardMode           = BABYLON.Mesh.BILLBOARDMODE_ALL;plane1755836593609.material                = mat1755836593609;shadowGenerator.addShadowCaster(marker1755836593609);var markerText                               = "Lake Hāwea";var markerName                              = "1755836701861";marker1755836701861                        = BABYLON.MeshBuilder.CreateSphere(markerName, {diameter: 0.5, segments: 64}, scene);marker1755836701861.material               = new BABYLON.StandardMaterial("mat", scene);marker1755836701861.material.diffuseColor  = BABYLON.Color3.FromHexString("#ffffff");marker1755836701861.position.y             = 0.541176;marker1755836701861.position.x             = 16.306925;marker1755836701861.position.z             = 3.134897;var path                                    = [new BABYLON.Vector3(0, 7.5, 0),new BABYLON.Vector3(0, 0, 0)];var tube1755836701861                      = BABYLON.MeshBuilder.CreateTube("tube", {path: path, radius: 0.09}, scene);tube1755836701861.material                 = new BABYLON.StandardMaterial("mat", scene);tube1755836701861.material.diffuseColor    = BABYLON.Color3.FromHexString("#ffffff");tube1755836701861.parent                   = marker1755836701861;var font_size                               = 48;var font                                    = font_size + "px Arial";var planeHeight                             = 2;var DTHeight                                = 1.4 * font_size;var ratio                                   = planeHeight/DTHeight;var temp                                    = new BABYLON.DynamicTexture("DynamicTexture", 64, scene);var tmpctx                                  = temp.getContext();tmpctx.font                                 = font;var DTWidth                                 = tmpctx.measureText(markerText).width + 40;var planeWidth                              = DTWidth * ratio;var dynamicTexture                          = new BABYLON.DynamicTexture("DynamicTexture", {width:DTWidth | 0, height:DTHeight | 0}, scene, false);var mat1755836701861                       = new BABYLON.StandardMaterial("mat", scene);mat1755836701861.diffuseTexture            = dynamicTexture;mat1755836701861.backFaceCulling           = false;dynamicTexture.drawText(markerText, null, null, font, "#142d43", "#ffffff", true);var plane1755836701861                     = BABYLON.MeshBuilder.CreatePlane("plane", {width:planeWidth, height:planeHeight}, scene, false, BABYLON.Mesh.DOUBLESIDE);plane1755836701861.position.y              = 8.5;plane1755836701861.parent                  = marker1755836701861;plane1755836701861.billboardMode           = BABYLON.Mesh.BILLBOARDMODE_ALL;plane1755836701861.material                = mat1755836701861;shadowGenerator.addShadowCaster(marker1755836701861);var markerText                               = "Kā-muriwai / Arrowtown";var markerName                              = "1755836673360";marker1755836673360                        = BABYLON.MeshBuilder.CreateSphere(markerName, {diameter: 0.5, segments: 64}, scene);marker1755836673360.material               = new BABYLON.StandardMaterial("mat", scene);marker1755836673360.material.diffuseColor  = BABYLON.Color3.FromHexString("#ffffff");marker1755836673360.position.y             = 0.591993;marker1755836673360.position.x             = -1.930085;marker1755836673360.position.z             = -16.784610;var path                                    = [new BABYLON.Vector3(0, 7.5, 0),new BABYLON.Vector3(0, 0, 0)];var tube1755836673360                      = BABYLON.MeshBuilder.CreateTube("tube", {path: path, radius: 0.09}, scene);tube1755836673360.material                 = new BABYLON.StandardMaterial("mat", scene);tube1755836673360.material.diffuseColor    = BABYLON.Color3.FromHexString("#ffffff");tube1755836673360.parent                   = marker1755836673360;var font_size                               = 48;var font                                    = font_size + "px Arial";var planeHeight                             = 2;var DTHeight                                = 1.4 * font_size;var ratio                                   = planeHeight/DTHeight;var temp                                    = new BABYLON.DynamicTexture("DynamicTexture", 64, scene);var tmpctx                                  = temp.getContext();tmpctx.font                                 = font;var DTWidth                                 = tmpctx.measureText(markerText).width + 40;var planeWidth                              = DTWidth * ratio;var dynamicTexture                          = new BABYLON.DynamicTexture("DynamicTexture", {width:DTWidth | 0, height:DTHeight | 0}, scene, false);var mat1755836673360                       = new BABYLON.StandardMaterial("mat", scene);mat1755836673360.diffuseTexture            = dynamicTexture;mat1755836673360.backFaceCulling           = false;dynamicTexture.drawText(markerText, null, null, font, "#142d43", "#ffffff", true);var plane1755836673360                     = BABYLON.MeshBuilder.CreatePlane("plane", {width:planeWidth, height:planeHeight}, scene, false, BABYLON.Mesh.DOUBLESIDE);plane1755836673360.position.y              = 8.5;plane1755836673360.parent                  = marker1755836673360;plane1755836673360.billboardMode           = BABYLON.Mesh.BILLBOARDMODE_ALL;plane1755836673360.material                = mat1755836673360;shadowGenerator.addShadowCaster(marker1755836673360);var markerText                               = "Wānaka";var markerName                              = "1755836632463";marker1755836632463                        = BABYLON.MeshBuilder.CreateSphere(markerName, {diameter: 0.5, segments: 64}, scene);marker1755836632463.material               = new BABYLON.StandardMaterial("mat", scene);marker1755836632463.material.diffuseColor  = BABYLON.Color3.FromHexString("#ffffff");marker1755836632463.position.y             = 0.522513;marker1755836632463.position.x             = 11.214315;marker1755836632463.position.z             = -1.174514;var path                                    = [new BABYLON.Vector3(0, 7.5, 0),new BABYLON.Vector3(0, 0, 0)];var tube1755836632463                      = BABYLON.MeshBuilder.CreateTube("tube", {path: path, radius: 0.09}, scene);tube1755836632463.material                 = new BABYLON.StandardMaterial("mat", scene);tube1755836632463.material.diffuseColor    = BABYLON.Color3.FromHexString("#ffffff");tube1755836632463.parent                   = marker1755836632463;var font_size                               = 48;var font                                    = font_size + "px Arial";var planeHeight                             = 2;var DTHeight                                = 1.4 * font_size;var ratio                                   = planeHeight/DTHeight;var temp                                    = new BABYLON.DynamicTexture("DynamicTexture", 64, scene);var tmpctx                                  = temp.getContext();tmpctx.font                                 = font;var DTWidth                                 = tmpctx.measureText(markerText).width + 40;var planeWidth                              = DTWidth * ratio;var dynamicTexture                          = new BABYLON.DynamicTexture("DynamicTexture", {width:DTWidth | 0, height:DTHeight | 0}, scene, false);var mat1755836632463                       = new BABYLON.StandardMaterial("mat", scene);mat1755836632463.diffuseTexture            = dynamicTexture;mat1755836632463.backFaceCulling           = false;dynamicTexture.drawText(markerText, null, null, font, "#142d43", "#ffffff", true);var plane1755836632463                     = BABYLON.MeshBuilder.CreatePlane("plane", {width:planeWidth, height:planeHeight}, scene, false, BABYLON.Mesh.DOUBLESIDE);plane1755836632463.position.y              = 8.5;plane1755836632463.parent                  = marker1755836632463;plane1755836632463.billboardMode           = BABYLON.Mesh.BILLBOARDMODE_ALL;plane1755836632463.material                = mat1755836632463;shadowGenerator.addShadowCaster(marker1755836632463);var markerText                               = "Takerehaka / Kingston";var markerName                              = "1755836813654";marker1755836813654                        = BABYLON.MeshBuilder.CreateSphere(markerName, {diameter: 0.5, segments: 64}, scene);marker1755836813654.material               = new BABYLON.StandardMaterial("mat", scene);marker1755836813654.material.diffuseColor  = BABYLON.Color3.FromHexString("#ffffff");marker1755836813654.position.y             = 0.561592;marker1755836813654.position.x             = -7.140156;marker1755836813654.position.z             = -40.723720;var path                                    = [new BABYLON.Vector3(0, 7.5, 0),new BABYLON.Vector3(0, 0, 0)];var tube1755836813654                      = BABYLON.MeshBuilder.CreateTube("tube", {path: path, radius: 0.09}, scene);tube1755836813654.material                 = new BABYLON.StandardMaterial("mat", scene);tube1755836813654.material.diffuseColor    = BABYLON.Color3.FromHexString("#ffffff");tube1755836813654.parent                   = marker1755836813654;var font_size                               = 48;var font                                    = font_size + "px Arial";var planeHeight                             = 2;var DTHeight                                = 1.4 * font_size;var ratio                                   = planeHeight/DTHeight;var temp                                    = new BABYLON.DynamicTexture("DynamicTexture", 64, scene);var tmpctx                                  = temp.getContext();tmpctx.font                                 = font;var DTWidth                                 = tmpctx.measureText(markerText).width + 40;var planeWidth                              = DTWidth * ratio;var dynamicTexture                          = new BABYLON.DynamicTexture("DynamicTexture", {width:DTWidth | 0, height:DTHeight | 0}, scene, false);var mat1755836813654                       = new BABYLON.StandardMaterial("mat", scene);mat1755836813654.diffuseTexture            = dynamicTexture;mat1755836813654.backFaceCulling           = false;dynamicTexture.drawText(markerText, null, null, font, "#142d43", "#ffffff", true);var plane1755836813654                     = BABYLON.MeshBuilder.CreatePlane("plane", {width:planeWidth, height:planeHeight}, scene, false, BABYLON.Mesh.DOUBLESIDE);plane1755836813654.position.y              = 8.5;plane1755836813654.parent                  = marker1755836813654;plane1755836813654.billboardMode           = BABYLON.Mesh.BILLBOARDMODE_ALL;plane1755836813654.material                = mat1755836813654;shadowGenerator.addShadowCaster(marker1755836813654);BABYLON.SceneLoader.ImportMesh("", "_ELEMENTS/", "pin.glb", scene, function (meshes) {meshes[1].material = new BABYLON.StandardMaterial("matPin", scene);meshes[1].material.diffuseColor = BABYLON.Color3.FromHexString('#2bd4df');var pin = BABYLON.Mesh.MergeMeshes([meshes[1],meshes[2],meshes[3],meshes[4],meshes[5],meshes[6],meshes[7],meshes[8],meshes[9],meshes[10]], true, true, false, false, true);    pin.name = "1755837272065";    pin.scaling = new BABYLON.Vector3(1.0, 1.0, 1.0);    pin.rotationQuaternion = new BABYLON.Quaternion.RotationAxis(new BABYLON.Vector3(0, Math.PI, 0), 0.000000);    pin.rotationQuaternion.x  = 0;    pin.rotationQuaternion.y  = 1.000000;    pin.rotationQuaternion.z  = 0;    pin.rotationQuaternion.w  = 0.000000;    pin.position.y            = 0.341176;    pin.position.x            = 17.302669;    pin.position.z            = 11.910037;pin.billboardMode = BABYLON.Mesh.BILLBOARDMODE_Y;shadowGenerator.addShadowCaster(pin);pin.actionManager = new BABYLON.ActionManager(scene);pin.actionManager.registerAction(new BABYLON.ExecuteCodeAction(BABYLON.ActionManager.OnPickTrigger, pickElement));});BABYLON.SceneLoader.ImportMesh("", "_ELEMENTS/", "pin.glb", scene, function (meshes) {meshes[1].material = new BABYLON.StandardMaterial("matPin", scene);meshes[1].material.diffuseColor = BABYLON.Color3.FromHexString('#2bd4df');var pin = BABYLON.Mesh.MergeMeshes([meshes[1],meshes[2],meshes[3],meshes[4],meshes[5],meshes[6],meshes[7],meshes[8],meshes[9],meshes[10]], true, true, false, false, true);    pin.name = "1755836986978";    pin.scaling = new BABYLON.Vector3(1.0, 1.0, 1.0);    pin.rotationQuaternion = new BABYLON.Quaternion.RotationAxis(new BABYLON.Vector3(0, Math.PI, 0), 0.000000);    pin.rotationQuaternion.x  = 0;    pin.rotationQuaternion.y  = 1.000000;    pin.rotationQuaternion.z  = 0;    pin.rotationQuaternion.w  = 0.000000;    pin.position.y            = 0.294118;    pin.position.x            = -15.529593;    pin.position.z            = -25.586097;pin.billboardMode = BABYLON.Mesh.BILLBOARDMODE_Y;shadowGenerator.addShadowCaster(pin);pin.actionManager = new BABYLON.ActionManager(scene);pin.actionManager.registerAction(new BABYLON.ExecuteCodeAction(BABYLON.ActionManager.OnPickTrigger, pickElement));});BABYLON.SceneLoader.ImportMesh("", "_ELEMENTS/", "pin.glb", scene, function (meshes) {meshes[1].material = new BABYLON.StandardMaterial("matPin", scene);meshes[1].material.diffuseColor = BABYLON.Color3.FromHexString('#2bd4df');var pin = BABYLON.Mesh.MergeMeshes([meshes[1],meshes[2],meshes[3],meshes[4],meshes[5],meshes[6],meshes[7],meshes[8],meshes[9],meshes[10]], true, true, false, false, true);    pin.name = "1755837197958";    pin.scaling = new BABYLON.Vector3(1.0, 1.0, 1.0);    pin.rotationQuaternion = new BABYLON.Quaternion.RotationAxis(new BABYLON.Vector3(0, Math.PI, 0), 0.000000);    pin.rotationQuaternion.x  = 0;    pin.rotationQuaternion.y  = 1.000000;    pin.rotationQuaternion.z  = 0;    pin.rotationQuaternion.w  = 0.000000;    pin.position.y            = 0.300359;    pin.position.x            = 8.633993;    pin.position.z            = 6.672835;pin.billboardMode = BABYLON.Mesh.BILLBOARDMODE_Y;shadowGenerator.addShadowCaster(pin);pin.actionManager = new BABYLON.ActionManager(scene);pin.actionManager.registerAction(new BABYLON.ExecuteCodeAction(BABYLON.ActionManager.OnPickTrigger, pickElement));});function pickElement(meshEvent) {pickedMesh = meshEvent.meshUnderPointer;pickedName = pickedMesh.name;thisElement = scene.getMeshByName(pickedName);pinPopupClose('1755837272065');pinPopupClose('1755836986978');pinPopupClose('1755837197958');pinPopupOpen(pickedName);}return scene;};var engine = new BABYLON.Engine(canvas, true, { preserveDrawingBuffer: true, stencil: true });var scene = createScene();engine.runRenderLoop(function() { scene.render(); });window.addEventListener("resize", function(){ engine.resize(); });</script></body></html>
